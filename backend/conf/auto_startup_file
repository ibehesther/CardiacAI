============================= AI PART ===================================
[Unit]
Description=Ai service for CardiacAI
After=network.target

[Service]
Type=simple
WorkingDirectory=/home/azureuser/CardiacAI/Ai/
StandardOutput=append:/var/log/cardiac_ai.log
StandardError=append:/var/log/cardiac_ai.err.log
Environment="PATH=/home/azureuser/CardiacAI/Ai/venv/bin/python"
Environment="PYTHONPATH=/home/azureuser/CardiacAI/Ai/venv/bin/python"

ExecStart=/home/azureuser/CardiacAI/Ai/venv/bin/uvicorn main:app --host 0.0.0.0 --port 5000 --workers 4

Restart=always
RestartSec=3
KillMode=process
TimeoutStopSec=30

[Install]
WantedBy=multi-user.target


============================ BACKEND PART ==================================
[Unit]
Description=cardiac service
After=network.target

[Service]
Type=simple
WorkingDirectory=/home/azureuser/CardiacAI/backend
StandardOutput=append:/var/log/cardiac.log
StandardError=append:/var/log/cardiac.err.log
Environment="PATH=/home/azureuser/.cache/pypoetry/virtualenvs/4evabraids-backend-SKGwhuy3-py3.10/bin"
Environment="PYTHONPATH=/home/azureuser/CardiacAI/backend/app/src"

ExecStart=/home/azureuser/.cache/pypoetry/virtualenvs/4evabraids-backend-SKGwhuy3-py3.10/bin/gunicorn -w 1 -k uvicorn.workers.UvicornWorker   app.main:app --bind 0.0.0.0:8000 --log-level debug

Restart=always
RestartSec=3
KillMode=process
TimeoutStopSec=30

[Install]
WantedBy=multi-user.target